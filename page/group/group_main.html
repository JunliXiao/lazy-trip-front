<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LazyTrip.io | 揪團</title>
    <!-- Bulma 自訂 -->
    <link rel="stylesheet" href="../../asset/css/my-bulma.css" />
    <!-- 自定義 CSS -->
    <link rel="stylesheet" href="../../asset/css/index-style.css" />
    <!-- Font Awesome -->
    <script
      src="https://kit.fontawesome.com/0548105e54.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- 共用元件 -->
    <script
      defer
      src="../../asset/js/components.js"
      type="text/javascript"
    ></script>

    <!-- 初始化 Bulma -->
    <script defer src="../../asset/js/bulma-init.js"></script>

    <!--GroupCss-->
    <link rel="stylesheet" href="./css/group.css" />
  </head>
  <body>
    <!--預計加入:滑到內容若為登入者的留言要顯示刪除按鈕在右上角-->
    <!-- 導覽列 -->
    <header-component></header-component>
    <!--彈窗-->
    <div id="group_main_fs_alert">
      <div class="group_main_fs_alert_bg"></div>
      <div class="group_main_fs_alert_show">
        <div class="group_main_fs_alert_title">請輸入想找的朋友ID</div>
        <input
          class="input fs_alert_txt"
          id="fd_id"
          type="text"
          placeholder="請輸入ID"
        />
        <span class="icon" id="search_fd">
          <i class="fa-solid fas fa-lg fa-magnifying-glass"></i>
        </span>
        <div id="search_rs">沒有結果</div>
        <div class="btn_s button" id="alert_ok">OK</div>
      </div>
    </div>

    <!--揪團名-->
    <div class="column">
      <div class="content has-text-centered">
        <h1 class="gp_main_gpname">揪團名揪團名</h1>
      </div>
    </div>

    <!--資訊欄-->
    <div
      class="columns"
      style="border-bottom: 0.8px solid; border-color: #cfcff8"
    >
      <div class="column is-8"></div>
      <div class="column is-3 trip_info">
        <span>當前行程:</span>
        <span class="trip_name">台北->台中</span>
        <p></p>
        <span> 日期:</span>
        <span class="trip_date">01/25->01/28</span>
      </div>
      <div class="column is-1">
        <span class="icon_setting"><i class="fa-solid fa-gear"></i></span>
      </div>
    </div>

    <!--討論區-->
    <div class="columns">
      <div class="column is-1"></div>
      <div class="column is-9 content has-text" style="margin-bottom: 12px">
        <h2>討論區</h2>
      </div>
      <button
        class="button is-2 is-primary"
        id="invite_fd"
        style="border-radius: 10px; margin-top: 10px"
      >
        邀請朋友
      </button>
    </div>

    <div class="columns" style="height: 350px">
      <div class="column is-1"></div>
      <div class="column is-9 content_area content">
        <section class="section" style="border-radius: 10px; padding: 20px">
          <!--單一留言-->
          <article class="message is-primary">
            <div class="columns group_message message-body">
              <img
                src="./test.png"
                class="column is-1 group_main_img_content"
              />
              <div class="column is-9">
                <span class="group_main_member_content_name">會員名稱</span
                ><br />
                <span>內容內容</span>
              </div>
              <div class="column is-2 content_time">
                <span class="group_main_msg_time">2023-1-26</span>
                <p></p>
                <span class="group_main_msg_time">16:08:08</span>
              </div>
            </div>
          </article>
          <article class="message is-primary">
            <div class="columns group_message message-body">
              <img
                src="./test.png"
                class="column is-1 group_main_img_content"
              />
              <div class="column is-9">
                <span class="group_main_member_content_name">會員名稱</span
                ><br />
                <span
                  >內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容內容</span
                >
              </div>
              <div class="column is-2 content_time">
                <span class="group_main_msg_time">2023-1-26</span>
                <p></p>
                <span class="group_main_msg_time">16:08:08</span>
              </div>
            </div>
          </article>
          <article class="message is-primary">
            <div class="columns group_message message-body">
              <img
                src="./test.png"
                class="column is-1 group_main_img_content"
              />
              <div class="column is-9">
                <span class="group_main_member_content_name">會員名稱</span
                ><br />
                <span>內容內容</span>
              </div>
              <div class="column is-2 content_time">
                <span class="group_main_msg_time">2023-1-26</span>
                <p></p>
                <span class="group_main_msg_time">16:08:08</span>
              </div>
            </div>
          </article>
        </section>
      </div>
      <div class="column is-1 group_member">
        <div class="columns" style="height: 300px">
          <div class="column group_member_list">
            <div class="field group_main_member_list_title">
              <label>成員列表</label>
            </div>
            <div class="member_list_content">
              <label
                ><img
                  class="group_main_img_member_list"
                  src="./test.png"
                />中文中文中文中文</label
              >
            </div>
            <div class="member_list_content">
              <label
                ><img
                  class="group_main_img_member_list"
                  src="./test.png"
                />asdsaa1</label
              >
            </div>
            <div class="member_list_content">
              <label
                ><img
                  class="group_main_img_member_list"
                  src="./test.png"
                />asdsaa1</label
              >
            </div>
            <div class="member_list_content">
              <label
                ><img
                  class="group_main_img_member_list"
                  src="./test.png"
                />asdsaa1</label
              >
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="columns">
      <div class="column is-1"></div>
      <div class="field column is-9">
        <label class="label">留言</label>
        <div class="control">
          <input class="input" type="text" placeholder="請輸入想說的話" />
        </div>
      </div>
    </div>
    <!-- 頁尾 -->
    <footer-component></footer-component>
    <script>
      window.addEventListener("load", function () {
        let setting_el = document.getElementsByClassName("icon_setting");
        setting_el[0].onclick = () => {
          console.log("sayhi");
        };
        let invite_fd_el = document.getElementById("invite_fd");
        invite_fd_el.onclick = () => {
          let show_alert = document.getElementById("group_main_fs_alert");
          show_alert.style.display = "block";
          let close_alert = document.getElementById("alert_ok");
          function close() {
            show_alert.style.display = "none";
          }
          close_alert.addEventListener("click", close);
        };
        let search_fd_el = document.getElementById("search_fd");
        search_fd_el.onclick = () => {
          let search_fd_ct = document.getElementById("fd_id");
          var submit_vl = fd_id.value;
          // console.log(submit_vl);
          var search_rs_txt = document.getElementById("search_rs");
          search_rs_txt.innerText = submit_vl;
          search_rs_txt.style.display = "block";
        };
        search_rs.onclick = () => {
          alert("已發送邀請");
        };

        //fetch:

        let getUrlString = location.href;
        var url = new URL(getUrlString);
        let gpid = url.searchParams.get("groupid"); // 回傳 groupid
        // console.log(gpid);

        var myHeaders = new Headers();
        myHeaders.append("Content-Type", "application/x-www-form-urlencoded");
        myHeaders.append(
          "Cookie",
          "JSESSIONID=079AEC6D76AA16D5891CFD9E68BAAFDB"
        );

        // var urlencoded = new URLSearchParams();
        // urlencoded.append("groupid", gpid);

        // var requestOptions = {
        // method: 'GET',
        //   headers: myHeaders,
        //   body: urlencoded,
        //   redirect: 'follow'
        // };
        let url1 = "http://localhost:8080/lazy-trip-back/GroupGetOne?groupid=";
        // console.log(url1 + gpid);
        fetch(url1 + gpid)
          .then((response) => response.json())
          .then((data) => {
            $("#gp_main_gpname").html(data.groupname);
          })
          .catch((error) => console.log("error", error));
      });
    </script>
  </body>
</html>
